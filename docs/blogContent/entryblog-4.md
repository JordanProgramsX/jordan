# Proteger una API pública de automatismos usando JWT y Cloudflare

Cuando una aplicación consume datos de una API pública, es posible que cualquier persona pueda hacer ingeniería inversa a las peticiones y atacar directamente a nuestros endpoint. Sin embargo, implementando JSON Web Tokens (JWT) en el Front junto con Cloudflare, podemos establecer una barrera para aquellas personas que intenten consumir nuestra API fuera de la aplicación autorizada o Front.

Para lograr esto, se puede configurar el Frontend de la aplicación para que se renderice junto a un JWT. De esta manera, cada vez que un usuario acceda a la vista HTML, se le asignará un token temporal que permitirá autenticar su acceso a la API durante un periodo de tiempo limitado, como por ejemplo 5 minutos. Este token temporal asegura que solo aquellos con acceso legítimo puedan realizar peticiones a la API.

_Si, parece que estamos reinventando la cookie de sesión, mecanismo utilizado en la web para mantener el estado y la información del usuario durante su navegación en un sitio web. Cuando un usuario visita un sitio web que utiliza cookies de sesión, se crea una cookie única en su navegador, la cual contiene un identificador de sesión. Este identificador permite al servidor web reconocer y recordar al usuario y sus acciones en diferentes páginas del sitio web a lo largo del tiempo. Son temporales y generalmente se eliminan cuando el usuario cierra su navegador._

Una vez que se ha establecido esta "sesión temporal" para los usuarios, es crucial proteger el Frontend utilizando el servicio de Cloudflare. Al hacerlo, se impide que sistemas automáticos o bots puedan recuperar el JWT necesario para atacar la API. Cloudflare actúa como una barrera adicional, permitiendo el acceso únicamente a través de sus servidores de protección contra bots y bloqueando intentos de acceso no autorizado.

Es decir, proteger una API pública utilizando JWT y Cloudflare podria llegar a ser una forma efectiva de garantizar que solo usuarios del front tengan acceso a la API. Al hacer que la vista HTML se renderice con un JWT temporal y configurar Cloudflare para que solo permita el acceso a través de sus servidores de protección contra bots, podemos aumentar las barreras para que se consuman por medio de algún automatismo. 

Aunque existen diversas soluciones ampliamente aceptadas para proteger las APIs, el enfoque que combina JWT y Cloudflare es más apropiado para situaciones específicas. Es esencial analizar detenidamente las necesidades de seguridad de la API y seleccionar la solución más conveniente según el caso. De este modo, se garantizará la efectividad de la protección y se evitarán complicaciones innecesarias durante el desarrollo del proyecto.
